//! Configure the ISR table
//!
//! TODO: This is halfway done

const ISR = *const fn () callconv(.C) void;

const ram_start = 0x24000000;
const ram_size = 0x00071C00;
const __stack = ram_start + ram_size;

export const vector_table: VectorTable linksection(".data.init.enter") = .{
    .stack_pointer = __stack,
    .Reset_Handler = @import("start.zig")._start,
};

fn default_handler() callconv(.C) void {
    while (true) {}
}

const VectorTable = extern struct {
    stack_pointer: u32,
    Reset_Handler: ISR,
    NMI_Handler: ISR = default_handler,
    HardFault_Handler: ISR = default_handler,
    MemManage_Handler: ISR = default_handler,
    BusFault_Handler: ISR = default_handler,
    UsageFault_Handler: ISR = default_handler,
    _RESERVED0: u32 = 0,
    _RESERVED1: u32 = 0,
    _RESERVED2: u32 = 0,
    _RESERVED3: u32 = 0,
    SVC_Handler: ISR = default_handler,
    DebugMon_Handler: ISR = default_handler,
    _RESERVED4: u32 = 0,
    PendSV_Handler: ISR = default_handler,
    SysTick_Handler: ISR = default_handler,
    PVD_PVM_IRQHandler: ISR = default_handler,
    _RESERVED5: u32 = 0,
    DTS_IRQHandler: ISR = default_handler,
    IWDG_IRQHandler: ISR = default_handler,
    WWDG_IRQHandler: ISR = default_handler,
    RCC_IRQHandler: ISR = default_handler,
    _RESERVED6: u32 = 0,
    _RESERVED7: u32 = 0,
    FLASH_IRQHandler: ISR = default_handler,
    RAMECC_IRQHandler: ISR = default_handler,
    FPU_IRQHandler: ISR = default_handler,
    _RESERVED8: u32 = 0,
    _RESERVED9: u32 = 0,
    TAMP_IRQHandler: ISR = default_handler,
    _RESERVED10: u32 = 0,
    _RESERVED11: u32 = 0,
    EXTI0_IRQHandler: ISR = default_handler,
    EXTI1_IRQHandler: ISR = default_handler,
    EXTI2_IRQHandler: ISR = default_handler,
    EXTI3_IRQHandler: ISR = default_handler,
    EXTI4_IRQHandler: ISR = default_handler,
    EXTI5_IRQHandler: ISR = default_handler,
    EXTI6_IRQHandler: ISR = default_handler,
    EXTI7_IRQHandler: ISR = default_handler,
    EXTI8_IRQHandler: ISR = default_handler,
    EXTI9_IRQHandler: ISR = default_handler,
    EXTI10_IRQHandler: ISR = default_handler,
    EXTI11_IRQHandler: ISR = default_handler,
    EXTI12_IRQHandler: ISR = default_handler,
    EXTI13_IRQHandler: ISR = default_handler,
    EXTI14_IRQHandler: ISR = default_handler,
    EXTI15_IRQHandler: ISR = default_handler,
    RTC_IRQHandler: ISR = default_handler,
    SAES_IRQHandler: ISR = default_handler,
    CRYP_IRQHandler: ISR = default_handler,
    PKA_IRQHandler: ISR = default_handler,
    HASH_IRQHandler: ISR = default_handler,
    RNG_IRQHandler: ISR = default_handler,
    ADC1_2_IRQHandler: ISR = default_handler,
    GPDMA1_Channel0_IRQHandler: ISR = default_handler,
    GPDMA1_Channel1_IRQHandler: ISR = default_handler,
    GPDMA1_Channel2_IRQHandler: ISR = default_handler,
    GPDMA1_Channel3_IRQHandler: ISR = default_handler,
    GPDMA1_Channel4_IRQHandler: ISR = default_handler,
    GPDMA1_Channel5_IRQHandler: ISR = default_handler,
    GPDMA1_Channel6_IRQHandler: ISR = default_handler,
    GPDMA1_Channel7_IRQHandler: ISR = default_handler,
    TIM1_BRK_IRQHandler: ISR = default_handler,
    TIM1_UP_IRQHandler: ISR = default_handler,
    TIM1_TRG_COM_IRQHandler: ISR = default_handler,
    TIM1_CC_IRQHandler: ISR = default_handler,
    TIM2_IRQHandler: ISR = default_handler,
    TIM3_IRQHandler: ISR = default_handler,
    TIM4_IRQHandler: ISR = default_handler,
    TIM5_IRQHandler: ISR = default_handler,
    TIM6_IRQHandler: ISR = default_handler,
    TIM7_IRQHandler: ISR = default_handler,
    TIM9_IRQHandler: ISR = default_handler,
    SPI1_IRQHandler: ISR = default_handler,
    SPI2_IRQHandler: ISR = default_handler,
    SPI3_IRQHandler: ISR = default_handler,
    SPI4_IRQHandler: ISR = default_handler,
    SPI5_IRQHandler: ISR = default_handler,
    SPI6_IRQHandler: ISR = default_handler,
    HPDMA1_Channel0_IRQHandler: ISR = default_handler,
    HPDMA1_Channel1_IRQHandler: ISR = default_handler,
    HPDMA1_Channel2_IRQHandler: ISR = default_handler,
    HPDMA1_Channel3_IRQHandler: ISR = default_handler,
    HPDMA1_Channel4_IRQHandler: ISR = default_handler,
    HPDMA1_Channel5_IRQHandler: ISR = default_handler,
    HPDMA1_Channel6_IRQHandler: ISR = default_handler,
    HPDMA1_Channel7_IRQHandler: ISR = default_handler,
    SAI1_A_IRQHandler: ISR = default_handler,
    SAI1_B_IRQHandler: ISR = default_handler,
    SAI2_A_IRQHandler: ISR = default_handler,
    SAI2_B_IRQHandler: ISR = default_handler,
    I2C1_EV_IRQHandler: ISR = default_handler,
    I2C1_ER_IRQHandler: ISR = default_handler,
    I2C2_EV_IRQHandler: ISR = default_handler,
    I2C2_ER_IRQHandler: ISR = default_handler,
    I2C3_EV_IRQHandler: ISR = default_handler,
    I2C3_ER_IRQHandler: ISR = default_handler,
    USART1_IRQHandler: ISR = default_handler,
    USART2_IRQHandler: ISR = default_handler,
    USART3_IRQHandler: ISR = default_handler,
    UART4_IRQHandler: ISR = default_handler,
    UART5_IRQHandler: ISR = default_handler,
    UART7_IRQHandler: ISR = default_handler,
    UART8_IRQHandler: ISR = default_handler,
    I3C1_EV_IRQHandler: ISR = default_handler,
    I3C1_ER_IRQHandler: ISR = default_handler,
    OTG_HS_IRQHandler: ISR = default_handler,
    ETH_IRQHandler: ISR = default_handler,
    CORDIC_IRQHandler: ISR = default_handler,
    GFXTIM_IRQHandler: ISR = default_handler,
    DCMIPP_IRQHandler: ISR = default_handler,
    LTDC_IRQHandler: ISR = default_handler,
    LTDC_ER_IRQHandler: ISR = default_handler,
    DMA2D_IRQHandler: ISR = default_handler,
    JPEG_IRQHandler: ISR = default_handler,
    GFXMMU_IRQHandler: ISR = default_handler,
    I3C1_WKUP_IRQHandler: ISR = default_handler,
    MCE1_IRQHandler: ISR = default_handler,
    MCE2_IRQHandler: ISR = default_handler,
    MCE3_IRQHandler: ISR = default_handler,
    XSPI1_IRQHandler: ISR = default_handler,
    XSPI2_IRQHandler: ISR = default_handler,
    FMC_IRQHandler: ISR = default_handler,
    SDMMC1_IRQHandler: ISR = default_handler,
    SDMMC2_IRQHandler: ISR = default_handler,
    _RESERVED12: u32 = 0,
    _RESERVED13: u32 = 0,
    OTG_FS_IRQHandler: ISR = default_handler,
    TIM12_IRQHandler: ISR = default_handler,
    TIM13_IRQHandler: ISR = default_handler,
    TIM14_IRQHandler: ISR = default_handler,
    TIM15_IRQHandler: ISR = default_handler,
    TIM16_IRQHandler: ISR = default_handler,
    TIM17_IRQHandler: ISR = default_handler,
    LPTIM1_IRQHandler: ISR = default_handler,
    LPTIM2_IRQHandler: ISR = default_handler,
    LPTIM3_IRQHandler: ISR = default_handler,
    LPTIM4_IRQHandler: ISR = default_handler,
    LPTIM5_IRQHandler: ISR = default_handler,
    SPDIF_RX_IRQHandler: ISR = default_handler,
    MDIOS_IRQHandler: ISR = default_handler,
    ADF1_FLT0_IRQHandler: ISR = default_handler,
    CRS_IRQHandler: ISR = default_handler,
    UCPD1_IRQHandler: ISR = default_handler,
    CEC_IRQHandler: ISR = default_handler,
    PSSI_IRQHandler: ISR = default_handler,
    LPUART1_IRQHandler: ISR = default_handler,
    WAKEUP_PIN_IRQHandler: ISR = default_handler,
    GPDMA1_Channel8_IRQHandler: ISR = default_handler,
    GPDMA1_Channel9_IRQHandler: ISR = default_handler,
    GPDMA1_Channel10_IRQHandler: ISR = default_handler,
    GPDMA1_Channel11_IRQHandler: ISR = default_handler,
    GPDMA1_Channel12_IRQHandler: ISR = default_handler,
    GPDMA1_Channel13_IRQHandler: ISR = default_handler,
    GPDMA1_Channel14_IRQHandler: ISR = default_handler,
    GPDMA1_Channel15_IRQHandler: ISR = default_handler,
    HPDMA1_Channel8_IRQHandler: ISR = default_handler,
    HPDMA1_Channel9_IRQHandler: ISR = default_handler,
    HPDMA1_Channel10_IRQHandler: ISR = default_handler,
    HPDMA1_Channel11_IRQHandler: ISR = default_handler,
    HPDMA1_Channel12_IRQHandler: ISR = default_handler,
    HPDMA1_Channel13_IRQHandler: ISR = default_handler,
    HPDMA1_Channel14_IRQHandler: ISR = default_handler,
    HPDMA1_Channel15_IRQHandler: ISR = default_handler,
    GPU2D_IRQHandler: ISR = default_handler,
    GPU2D_ER_IRQHandler: ISR = default_handler,
    ICACHE_IRQHandler: ISR = default_handler,
    FDCAN1_IT0_IRQHandler: ISR = default_handler,
    FDCAN1_IT1_IRQHandler: ISR = default_handler,
    FDCAN2_IT0_IRQHandler: ISR = default_handler,
    FDCAN2_IT1_IRQHandler: ISR = default_handler,
};
